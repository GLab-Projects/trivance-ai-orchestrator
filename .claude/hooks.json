{
  "pre_edit": [
    {
      "name": "backup_important_files",
      "description": "Hacer backup de archivos críticos antes de editarlos",
      "command": "if [[ \"$CLAUDE_FILE_PATH\" == *\"package.json\"* ]] || [[ \"$CLAUDE_FILE_PATH\" == *\"tsconfig.json\"* ]] || [[ \"$CLAUDE_FILE_PATH\" == *\".env\"* ]]; then mkdir -p .backups && cp \"$CLAUDE_FILE_PATH\" \".backups/$(basename $CLAUDE_FILE_PATH).$(date +%Y%m%d_%H%M%S).bak\"; fi",
      "enabled": true
    }
  ],
  "post_edit": [
    {
      "name": "auto_lint_typescript",
      "description": "Ejecutar linting automático después de editar archivos TypeScript",
      "command": "if [[ \"$CLAUDE_FILE_PATH\" == *\".ts\"* ]] || [[ \"$CLAUDE_FILE_PATH\" == *\".tsx\"* ]]; then dir=$(dirname \"$CLAUDE_FILE_PATH\"); while [[ \"$dir\" != \"/\" ]] && [[ ! -f \"$dir/package.json\" ]]; do dir=$(dirname \"$dir\"); done; if [[ -f \"$dir/package.json\" ]] && grep -q '\"lint\"' \"$dir/package.json\"; then cd \"$dir\" && npm run lint --silent 2>/dev/null || echo \"⚠️ Linting falló en $dir\"; fi; fi",
      "enabled": true
    },
    {
      "name": "typescript_check",
      "description": "Verificar tipos TypeScript después de ediciones importantes",
      "command": "if [[ \"$CLAUDE_FILE_PATH\" == *\".ts\"* ]] || [[ \"$CLAUDE_FILE_PATH\" == *\".tsx\"* ]]; then dir=$(dirname \"$CLAUDE_FILE_PATH\"); while [[ \"$dir\" != \"/\" ]] && [[ ! -f \"$dir/tsconfig.json\" ]]; do dir=$(dirname \"$dir\"); done; if [[ -f \"$dir/tsconfig.json\" ]]; then cd \"$dir\" && npx tsc --noEmit --skipLibCheck 2>/dev/null || echo \"⚠️ TypeScript check falló en $dir\"; fi; fi",
      "enabled": true
    }
  ],
  "pre_commit": [
    {
      "name": "run_linting_all_projects",
      "description": "Ejecutar linting en todos los proyectos antes de commit",
      "command": "for dir in level_up_backoffice ms_level_up_management ms_trivance_auth trivance-mobile; do if [[ -d \"$dir\" ]] && [[ -f \"$dir/package.json\" ]] && grep -q '\"lint\"' \"$dir/package.json\"; then echo \"🔍 Linting $dir...\"; cd \"$dir\" && npm run lint --silent && cd ..; fi; done",
      "enabled": false
    },
    {
      "name": "check_no_secrets_in_commit",
      "description": "Verificar que no se commiteen secrets o credenciales",
      "command": "if git diff --cached --name-only | xargs grep -l -E '(password|secret|key|token).*=.*[^\\s]' 2>/dev/null; then echo '❌ ADVERTENCIA: Posibles credenciales detectadas en el commit'; exit 1; fi",
      "enabled": true
    }
  ],
  "post_commit": [
    {
      "name": "notify_commit_success",
      "description": "Notificar commit exitoso",
      "command": "echo \"✅ Commit realizado exitosamente en $(git branch --show-current)\"",
      "enabled": true
    }
  ],
  "on_error": [
    {
      "name": "create_error_log",
      "description": "Crear log de errores para debugging",
      "command": "mkdir -p .claude/logs && echo \"[$(date)] Error: $CLAUDE_ERROR_MESSAGE\" >> .claude/logs/errors.log",
      "enabled": true
    }
  ],
  "daily": [
    {
      "name": "cleanup_old_backups",
      "description": "Limpiar backups antiguos (más de 7 días)",
      "command": "find .backups -name '*.bak' -mtime +7 -delete 2>/dev/null || true",
      "enabled": true
    },
    {
      "name": "update_dependencies_check",
      "description": "Verificar dependencias desactualizadas semanalmente",
      "command": "if [[ $(date +%u) -eq 1 ]]; then echo '📦 Verificación semanal de dependencias:'; for dir in level_up_backoffice ms_level_up_management ms_trivance_auth trivance-mobile; do if [[ -f \"$dir/package.json\" ]]; then echo \"=== $dir ===\"; cd \"$dir\" && npm outdated 2>/dev/null | head -10 && cd ..; fi; done; fi",
      "enabled": true
    }
  ]
}